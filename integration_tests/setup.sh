DB_USER=$(whoami)

echo "CREATE DATABASE testing;
USE testing;
CREATE TABLE \$keystore (
  name VARCHAR(64) NOT NULL,
  identity_public VARCHAR(768) NOT NULL,
  identity_private VARCHAR(256) NOT NULL,
  prekey_public VARCHAR(768) NOT NULL,
  prekey_private VARCHAR(256) NOT NULL,
  PRIMARY KEY (name)
);
CREATE USER '$DB_USER'@'127.0.0.1' IDENTIFIED BY '';
GRANT ALL ON testing.* TO '$DB_USER'@'127.0.0.1';" | sudo mysql -u root --protocol=tcp

echo "USE testing;
INSERT INTO \$keystore (name, identity_public, identity_private, prekey_public, prekey_private) VALUES ('2.1', 'MIIBpDCB2QYJKoZIhvcNAQMBMIHLAoHBAP//////////yQ/aoiFowjTExmKLgNwc0SkCTgiKZ8x0Agu+pjsTmyJRSgh5jjQE3e+VGbPNOkMbMCsKbfJfFDdP4TVtbVHCReSFtXZiXn7G9ExC6aY37WsL/1y29Aa37e44a/taiZ+lrp8kEXxLH+ZJKGZR7ORbPcIAfLihY78FmNpINhxV05ppFj+o/STPX4NlXSPco62WHGLzViCFUrue1SkHcJaWbWcMNU5KvJgE8XRsCMojcyf//////////wIBAgICAwADgcUAAoHBALiB0ANkouj/i4hewmC7IGWnqhMaxBaLmMnrPwFCP+fiA7xX7od2MbfYyGwL393IACve9yEeXGEn5Tb4rdkmg3r7H7U5Cu7mNihrBBxXwsfVHM8xREXIIAh683GEkik25XFS4rHwb7Cqbo9a6vLejfW7MxUu7T6RX1wCUxhRiXDKOOdo2a+OzwIczpLH3bIPdaiQkSHvi2rhN4NWrWRUh00lrD3ADGb4st4r45oaGE+A5YpIRjX/T0K4XqgSyTKa8w==', 'y3N7CR35SUXinSX2NTECJA==;xE57ROas8gnIbTsjmheav+Pj9cNcsUje2UZJu9Kjaho=;y7wrd/C8qR69BIW8cGBE0wfT9AJj72L+0hZbjbQCxLM2Bf2TiDv164fW99ChcbiPUc5CmFcGlp6pVRMRCsPrDJcBn9CrinsJ4s6AdfPiUSLH9ynPHYKL/MvPK80f4Cyvjsk4yM/DBR3aoP+qrHPtjA==', 'MIIBozCB2QYJKoZIhvcNAQMBMIHLAoHBAP//////////yQ/aoiFowjTExmKLgNwc0SkCTgiKZ8x0Agu+pjsTmyJRSgh5jjQE3e+VGbPNOkMbMCsKbfJfFDdP4TVtbVHCReSFtXZiXn7G9ExC6aY37WsL/1y29Aa37e44a/taiZ+lrp8kEXxLH+ZJKGZR7ORbPcIAfLihY78FmNpINhxV05ppFj+o/STPX4NlXSPco62WHGLzViCFUrue1SkHcJaWbWcMNU5KvJgE8XRsCMojcyf//////////wIBAgICAwADgcQAAoHAb0pR9fc17vpnB83Gou4SZlSwaYOTn4/tD2KoGRplQbX2zH+1ky0z6ERugMpEuBtzM2WBEMTr9cZx8ZG5DjPb1H6ysUuVdppre+sIrmm2tsMU7BW6cH+J7xYaAhSDVl1iiWqTRInuyjiwT13SEuEb35w+gUdxB6h1Odstrh5fBB3hRQJ+dWTzvTyn4Av8cI0B3lwyuEk1+I/Zlh3XtYftXD4bNSH7nrtWhDUyqh/QA7pseZ+Il/mHQmCYpgaKaRTT', '5kR8C5P8s0XqWR/XXk3LqA==;V5SDbpFs9U54s2CvLDvbAWX52MuAc2yE48+ytmvcSq4=;aCFP8oeIIxWLr0Euu+IBVlS0HYyxUcqLoYmBgdGX0JY+eIDPfjQqKbxv0kd16TKVz9wXDfU8z4XQvouv2PawNJHugqUK3wf/rUIatUhtbAyivRCLEpWV5k/I+kg7uXEIuBYObFJmO1MjyNKMj8C2Dg==');
INSERT INTO \$keystore (name, identity_public, identity_private, prekey_public, prekey_private) VALUES ('2.2', 'MIIBpDCB2QYJKoZIhvcNAQMBMIHLAoHBAP//////////yQ/aoiFowjTExmKLgNwc0SkCTgiKZ8x0Agu+pjsTmyJRSgh5jjQE3e+VGbPNOkMbMCsKbfJfFDdP4TVtbVHCReSFtXZiXn7G9ExC6aY37WsL/1y29Aa37e44a/taiZ+lrp8kEXxLH+ZJKGZR7ORbPcIAfLihY78FmNpINhxV05ppFj+o/STPX4NlXSPco62WHGLzViCFUrue1SkHcJaWbWcMNU5KvJgE8XRsCMojcyf//////////wIBAgICAwADgcUAAoHBAN5+34geJ9vlkRhAiTeO6a46EYK65+3xsOb41w2l42JwboLPeJJb1NUxeiTrpcu/7HqUy2cT/s17aDhuVzWkA5k71Caa1pIFYdbTYOUg/OoYNpN94u0zC68pzUodVhyA4Y1X/miMmAnr7WA3B3q8wFvg5sWdW+tlRPUtgbtvnv3zvdEGscH85CYqgvLigYMAO3zH/hcvYwpps2m6qhjuMKaQwHd+NO2LlcAe8DuXiRKRpxWR1WkMUqVkQG24eHJP0A==', 'vctZ7Jl+Ic8hlQC87vrN2Q==;hg0+3DR0Xhh0NRKvO8Zp1GT042/R3XjukWpX9liF0qE=;E1buhz7ZSIMff/5PYqrO6eYjr8w0fBZxr2PTU9SjlvRMO6vZTxNiRaWeIgvfGeR0GgTD+LbAK08qHpL32ujnnf/7fNnzTCzpFjpS3hRMCv8Nn71Ke6KxXgXnqT2qjKpl4Semt6kj+tujC0xoKbQZew==', 'MIIBozCB2QYJKoZIhvcNAQMBMIHLAoHBAP//////////yQ/aoiFowjTExmKLgNwc0SkCTgiKZ8x0Agu+pjsTmyJRSgh5jjQE3e+VGbPNOkMbMCsKbfJfFDdP4TVtbVHCReSFtXZiXn7G9ExC6aY37WsL/1y29Aa37e44a/taiZ+lrp8kEXxLH+ZJKGZR7ORbPcIAfLihY78FmNpINhxV05ppFj+o/STPX4NlXSPco62WHGLzViCFUrue1SkHcJaWbWcMNU5KvJgE8XRsCMojcyf//////////wIBAgICAwADgcQAAoHAQp9i8pvbVqD3llCh3cfeviThHhOuGcDkLZlCfQaMkHt5caPi1HpDx6eE7Fc/wpyM0sVc/mwW/Q6nOygoziYe48YHsAfErhMbMxQFx4NMy9k4mdqF5bvcAjR+Uwprsc2BUkBzte5LAC/D3hF7IFbEocZszeyCbsuHQySUCXhkJVJnRWJNohVUJz4zq8nBsqWnNcw0Rtym8ODYX+y3RdhWxL2SJdXE+yP/TuglUXc9BrXXRLBw+zYePf0w9YE2qRf9', 'lxhj5g0CdalqqkiiyMqrmg==;JbiYrngrzm/jRbIK8iQ5SSjDSZaojP9efQ8HcZqyR6M=;Zpq5jThefKbzdjuP0gesCmMIRzF8ZmFlT8Djb12UbcBKeEmgQACSZbQCJP1jNCdF4tNmZvLL4lZAgb+CVCn/OuQqqsBACWBu2rh7SAxUatZAL/yZtFiL9DNYPpw9eOA33Xf9NWrgYEXYgGkn47cf9w==');
INSERT INTO \$keystore (name, identity_public, identity_private, prekey_public, prekey_private) VALUES ('3.1', 'MIIBpDCB2QYJKoZIhvcNAQMBMIHLAoHBAP//////////yQ/aoiFowjTExmKLgNwc0SkCTgiKZ8x0Agu+pjsTmyJRSgh5jjQE3e+VGbPNOkMbMCsKbfJfFDdP4TVtbVHCReSFtXZiXn7G9ExC6aY37WsL/1y29Aa37e44a/taiZ+lrp8kEXxLH+ZJKGZR7ORbPcIAfLihY78FmNpINhxV05ppFj+o/STPX4NlXSPco62WHGLzViCFUrue1SkHcJaWbWcMNU5KvJgE8XRsCMojcyf//////////wIBAgICAwADgcUAAoHBAKDcZRQ/PQeVup4U19gawacSZKCUn3XwaMlgePKemaNimWBfRYdYdUZZg6yvza6Uapd5Tbm03uvROv3No72pnswiMvNQ+el2hwd5ag/UrAS27YSZ6aO3/7LpQo8NDTxFRzzg9f+KTcEwY2bvdLSgzEqkY5oSWCNZ5EW/6b1srkPex9K8qoMnHZ+ulHZ59tuVXi1Shy1WOjTAS2/huBnGvjLPzHtBdNWAGLF1v6mPmcVcBlX8v0XZOcciPNz6/0hkOA==', 'aqwMw0qXVLEwsdngnmbj9w==;s0drzKoYdY3HX6fyXovdo63VndMdk4qfHiMIGRvLixs=;6FhF055/L5IAXPLYxQgONZLs2Utb2xk1iUpMxkL2rGTlTU8Nx/L2du4vmZgieyBwe87fPUGFmBYSio6d4/acWwL4M/i2QwkHTDe85s8sER3SK7DZxa8gHLuSuaPQ8b62LkgAk4anb/ePICLXwoaB2A==', 'MIIBpDCB2QYJKoZIhvcNAQMBMIHLAoHBAP//////////yQ/aoiFowjTExmKLgNwc0SkCTgiKZ8x0Agu+pjsTmyJRSgh5jjQE3e+VGbPNOkMbMCsKbfJfFDdP4TVtbVHCReSFtXZiXn7G9ExC6aY37WsL/1y29Aa37e44a/taiZ+lrp8kEXxLH+ZJKGZR7ORbPcIAfLihY78FmNpINhxV05ppFj+o/STPX4NlXSPco62WHGLzViCFUrue1SkHcJaWbWcMNU5KvJgE8XRsCMojcyf//////////wIBAgICAwADgcUAAoHBAIX6yq42SQ/EbW19caujrHYEww117dcY7Xl2+qziG2qU6t8KL0E7G+qEQf5qSC8AlCDc3muovWtqasZmnQQ8eKGiWdvfg22aMZgh8UwLApPW7gL6SlCYVSS1J0qGvLRHNVFn5UQwLwOz27seY9STE91HiVdOH6Ty+IttbY/OYttTO/2/N9s6hz0gCDwgKoR6GcBINKJCVH/4aApVxRIL5AgStrJGcCSY9lbBNXdGr5XZgm5W2JyJOPdTpTEGvjb8aw==', 'U+K18SvelRxyPoVN2McX0g==;4hi8JR7/9pDiCSFhq7ORwwmft2Imyd/kbJpW0tGtmFM=;9qPMhwVpi68U/tL9fMxaIbR4KRVzW0PUZqaQnbBjZvtGlpy/4JQQyCwKbe1LtmJ/wTPokzCRC/kbUDd1oUUVjfDOMSMrSTR2FD+0/waqRm29ka+1NYPqy6w4mplWCM9WnaCT/TNK92rB8N5o22kWZg==');
INSERT INTO \$keystore (name, identity_public, identity_private, prekey_public, prekey_private) VALUES ('3.2', 'MIIBpDCB2QYJKoZIhvcNAQMBMIHLAoHBAP//////////yQ/aoiFowjTExmKLgNwc0SkCTgiKZ8x0Agu+pjsTmyJRSgh5jjQE3e+VGbPNOkMbMCsKbfJfFDdP4TVtbVHCReSFtXZiXn7G9ExC6aY37WsL/1y29Aa37e44a/taiZ+lrp8kEXxLH+ZJKGZR7ORbPcIAfLihY78FmNpINhxV05ppFj+o/STPX4NlXSPco62WHGLzViCFUrue1SkHcJaWbWcMNU5KvJgE8XRsCMojcyf//////////wIBAgICAwADgcUAAoHBAOCeOOtWLw6FIVIevNIXLKivyY5veqsIxKP2+arUMGsxQ8medIaHVcDwOm5Gnbep28GLf3dj1cIWDygrgagy9NW7+I1hnKEAM8kgJba8FdWOV+aQiZaCYS7SxX2NH3g/kwHRP2sxmhNOZNYGWjn12OH2puPP/RYXel7CIOkwDr5WOV71420QyL07iWidm98FVqg472Rp1LghZznG1dHMOAdBYkYKcCVG41pcinJhpDs1uI1qWOxWJrjPiphipexlhg==', 'wlgiZM3+3Kf7WTogE7BoIg==;ZVg0tKAMREya3WkBm4wC+r0XnYDewg6JZUxtRl+P71w=;db8sYnt1MdU33vxsNn6jrf7t24G2VYIaoIM3JKPeTpbXz5eH6Bz/kKQti1TZAnTOoc1tkgWOeJ+2gzZZVqSXMsJ9nsxjcJJQNuk2zrAV17v4QT5E+5ZsHT8U6aXSCyaridBMbrXqqdQhM/kd6uRpWQ==', 'MIIBpDCB2QYJKoZIhvcNAQMBMIHLAoHBAP//////////yQ/aoiFowjTExmKLgNwc0SkCTgiKZ8x0Agu+pjsTmyJRSgh5jjQE3e+VGbPNOkMbMCsKbfJfFDdP4TVtbVHCReSFtXZiXn7G9ExC6aY37WsL/1y29Aa37e44a/taiZ+lrp8kEXxLH+ZJKGZR7ORbPcIAfLihY78FmNpINhxV05ppFj+o/STPX4NlXSPco62WHGLzViCFUrue1SkHcJaWbWcMNU5KvJgE8XRsCMojcyf//////////wIBAgICAwADgcUAAoHBAMbFbn9WIdJpJcwv6Rl7iBcX2U7i3krUvlWt1bAi01EaAlH7a69VEWhUpKIaAfCoFclw1eVhiLUppzuu/wMdMPiyopHf6gjUiSO9aY2K/GFSwMGelU9skgEdCKpoEZa084wgy56lKu1VOhXJyx3oHThJeRTruWMc1+/3XHsXujPt1wtwNceVF/0nsYRcAO2tCTYpbprmR5CkYvs7vinDZ0zN3oQdLDCwfMg+lcP6kQwp8PkdgtofWAmrvw1dnQ+e2g==', '3FBKMVKJ83Gbvwttzee3iA==;O66JcFYXwYGcO/a+NEofN7zDngQ7TmA7KRsuTUSInZk=;uvDh8r9GUDk/d5pA0bqKTYlaGJDe+ZcFgjxi7aHoZGPAheB/jyor1WmgL1OqoXPbmIz3R5GONDQqbkcHj3zWZCjL8IZXNO5baSpmwdgRdN7ia7fbssjNtCdEne8QXDvC899Ixl4yGBJeysYZKGLgBQ==');
INSERT INTO \$keystore (name, identity_public, identity_private, prekey_public, prekey_private) VALUES ('3.3', 'MIIBpDCB2QYJKoZIhvcNAQMBMIHLAoHBAP//////////yQ/aoiFowjTExmKLgNwc0SkCTgiKZ8x0Agu+pjsTmyJRSgh5jjQE3e+VGbPNOkMbMCsKbfJfFDdP4TVtbVHCReSFtXZiXn7G9ExC6aY37WsL/1y29Aa37e44a/taiZ+lrp8kEXxLH+ZJKGZR7ORbPcIAfLihY78FmNpINhxV05ppFj+o/STPX4NlXSPco62WHGLzViCFUrue1SkHcJaWbWcMNU5KvJgE8XRsCMojcyf//////////wIBAgICAwADgcUAAoHBANdd74HRmfmaVBUDx5mtUyx9dS+2204BJsTpzwt+XOalf26jDHm29a6RxD+1vT2CLNWmulJAuLdnABAn1+cv9MS5jYZHx3U25CM5LuHXCYnzji4banW1vHYOujiLCnryA8mKvDLiVq1gOgpSV4L/5ne/B/U3jXEKgfKT/lM4FKDVf4nQjd+Xw8C8ndmu7mbPC6DohDnS4rGXC9DNRGzLKa+tWwp4IGllBrnex+1ElVbuhjpVXxw+uPu7Dp/go1DYJQ==', 'mX4ZpzUKgf1AT1YWfiPviQ==;sHxCBtuPzlZhWcL7WpT/Hc1mI5FEhlp8lbl3WPKijy8=;6JSWxo+b9Jen/2oW1AZoo4Z+wJuhbCBW4+sKU11HARINimF0DeGIgeKEJMWQqOJ4Bu3NJPqnsXZrWNH7y5JcATVNDsjOCRZH4c+9L886c/s9telixpp2Nia+6PE/L3Be90vBY1RgUng2zJNFyqTBEQ==', 'MIIBpDCB2QYJKoZIhvcNAQMBMIHLAoHBAP//////////yQ/aoiFowjTExmKLgNwc0SkCTgiKZ8x0Agu+pjsTmyJRSgh5jjQE3e+VGbPNOkMbMCsKbfJfFDdP4TVtbVHCReSFtXZiXn7G9ExC6aY37WsL/1y29Aa37e44a/taiZ+lrp8kEXxLH+ZJKGZR7ORbPcIAfLihY78FmNpINhxV05ppFj+o/STPX4NlXSPco62WHGLzViCFUrue1SkHcJaWbWcMNU5KvJgE8XRsCMojcyf//////////wIBAgICAwADgcUAAoHBAJZPhRL6bGbrmyfxr7Z6j1b5/6mIYFj67Es2Ic0sdMxN76A3W9zURtipw76lRuBVazUvuLanjT4GEg9HhZ8qwS9ml7xl3hJFBJhktqPXo/3W0xpCOOhgwJPDD00G9BSb6mBmaxQwhtXMeT4tg5YKBWTBLnZk3M5ZAuIJO/b3W3amdpK5ydsa4GmYK7v910zTrVqwCZipQ5kExDudwHvNnt9lZ/h18E3rv5THACwBpNCR6ai1PE/ROMKHi8sEdIgWgw==', 'jq9Jgi/KYAbAIAFu/hD8Dw==;B9jLefu4BUl/WOq2SWdp/HoeUrHU4c4Caw6M2ykoAP0=;2Sz2ydaDtgJCYEmdw23I52UmhRJ7Wq4bGQYRt+B9da8Ep/83t0tNS16i+BvMFhsN4UmC5l1ljT2L34ko/KquvKnxD1RWfwUECepX9+t9tKTFBSmuqXE+R4OJjU/79bfTPzdihFd4ud0YQ+3KWw6/sw==');
" | mysql --protocol=tcp

echo "function credentials() {
  return $CREDENTIALS_JSON;
}" >> integration_tests/cypress/integration/chat.spec.js

