<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="912px" height="455px" viewBox="-0.5 -0.5 912 455" content="&lt;mxfile modified=&quot;2018-12-18T23:41:20.668Z&quot; host=&quot;www.draw.io&quot; agent=&quot;Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Ubuntu Chromium/71.0.3578.80 Chrome/71.0.3578.80 Safari/537.36&quot; version=&quot;10.0.3&quot; etag=&quot;Jdn3-_Y7usiIMeuk1KtZ&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;bHxrE2tY5or9wFf33PQD&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><rect x="173" y="16" width="722" height="422" fill="#f6f6f6" stroke="none" pointer-events="none"/><path d="M 94.24 137 L 181.76 137" fill="none" stroke="#4284f3" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 88.24 137 L 94.24 135 L 94.24 139 Z" fill="#4284f3" stroke="#4284f3" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 187.76 137 L 181.76 139 L 181.76 135 Z" fill="#4284f3" stroke="#4284f3" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(110.5,121.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="56" height="10" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 10px; font-family: Helvetica; color: rgb(153, 153, 153); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">HTTP POST</div></div></foreignObject><text x="28" y="10" fill="#999999" text-anchor="middle" font-size="10px" font-family="Helvetica">HTTP POST</text></switch></g><rect x="16" y="121" width="70" height="156" rx="1" ry="1" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="16" y="121" width="70" height="156" rx="1" ry="1" fill="#ffffff" stroke="#dddddd" pointer-events="none"/><g transform="translate(32.5,253.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="36" height="17" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(153, 153, 153); line-height: 1.2; vertical-align: top; width: 38px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><font color="#666666" size="1"><b style="font-size: 13px ; line-height: 150%">Client</b></font></div></div></foreignObject><text x="18" y="15" fill="#999999" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 34.46 155.5 C 32.08 155.5 30.17 157.4 30.17 159.76 L 30.17 180.19 C 30.17 182.56 32.08 184.47 34.46 184.47 L 26 184.47 L 26 188.5 L 76 188.5 L 76 184.47 L 67.45 184.47 C 69.83 184.47 71.74 182.56 71.74 180.19 L 71.74 159.76 C 71.74 157.4 69.83 155.5 67.45 155.5 Z" fill="#757575" stroke="none" pointer-events="none"/><path d="M 34.14 159.53 L 67.75 159.53 L 67.75 180.46 L 34.14 180.46 Z" fill="#ffffff" stroke="none" pointer-events="none"/><rect x="191" y="93" width="240" height="130" rx="1" ry="1" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="191" y="93" width="240" height="130" rx="1" ry="1" fill="#ffffff" stroke="#dddddd" pointer-events="none"/><g transform="translate(193.5,101.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="123" height="113" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(153, 153, 153); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><font style="font-size: 12px"><font color="#000000" style="line-height: 250%">Authenticator</font><br /></font><font color="#666666" style="line-height: 80% ; font-size: 10px"><span style="font-size: 10px">logged in ⇒ {<br />    get <i>uuid</i> from ChatServer<br />    response = </span><i>uuid</i><font face="Courier New" style="font-size: 10px"><br />}<br /></font><font style="font-size: 10px ; line-height: 210%">else redirect to login</font></font><br /></div></div></foreignObject><text x="62" y="64" fill="#999999" text-anchor="middle" font-size="14px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><rect x="572" y="44" width="300" height="137" rx="1" ry="1" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="572" y="44" width="300" height="137" rx="1" ry="1" fill="#ffffff" stroke="#dddddd" pointer-events="none"/><g transform="translate(574.5,56.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="227" height="112" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><font><font style="font-size: 12px ; line-height: 250%">ChatServer, port 8081  </font><font style="line-height: 250% ; font-size: 11px">(not open to Internet)</font><br /></font><font color="#666666" style="font-size: 10px"><font style="font-size: 10px">generate <i>uuid<br /></i>create ClientThread for <i>uuid </i>and <i>username<br /></i>    (adds <i>uuid </i>to list of authorized tokens,<br />     begins listening for WebSocket connection)<br /></font><font style="font-size: 10px ; line-height: 200%">response = <i>uuid</i><br /></font></font></div></div></foreignObject><text x="114" y="63" fill="#000000" text-anchor="middle" font-size="14px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 440.24 125 L 536 125 L 536 94 L 563.76 94" fill="none" stroke="#4284f3" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 434.24 125 L 440.24 123 L 440.24 127 Z" fill="#4284f3" stroke="#4284f3" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 569.76 94 L 563.76 96 L 563.76 92 Z" fill="#4284f3" stroke="#4284f3" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(455.5,107.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="56" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(153, 153, 153); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><font style="font-size: 10px">HTTP POST</font></div></div></foreignObject><text x="28" y="12" fill="#999999" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><rect x="174" y="236" width="402" height="44" fill="#ffffff" stroke="#999999" stroke-width="2" stroke-dasharray="6 6" pointer-events="none"/><rect x="572" y="181" width="300" height="236" rx="1" ry="1" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="572" y="181" width="300" height="236" rx="1" ry="1" fill="#ffffff" stroke="#dddddd" pointer-events="none"/><g transform="translate(574.5,212.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="283" height="172" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><font><font color="#000000" style="font-size: 12px"><font style="font-size: 12px ; line-height: 250%">ChatServer, port 8082  </font></font><span><font style="font-size: 11px">(open to Internet)</font></span><br /></font><font color="#666666" style="font-size: 10px ; line-height: 120%"><i style="font-size: 10px">uuid</i><span> in list of authorized tokens ⇒ {</span><br /><span>    upgrade HTTPS connection to secure WebSocket</span><br /><span>        completes the client's WebSocket constructor</span><br /><span>    signal ClientThread that WebSocket is connected</span><br /><span>        ClientThread listens for up to 15 seconds,</span><br /><span>        after which the thread is discarded if there is no connection</span><br /><span>    ClientThread obtains WebSocket and waits for a message<br /></span>}<br />else send 400 Bad Request<br /></font></div></div></foreignObject><text x="142" y="93" fill="#000000" text-anchor="middle" font-size="14px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><rect x="169" y="235" width="7" height="45" fill="#ffffff" stroke="none" pointer-events="none"/><path d="M 97.24 245.98 L 328 245.5 L 563.76 245.98" fill="none" stroke="#4284f3" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 91.24 246 L 97.23 243.98 L 97.24 247.98 Z" fill="#4284f3" stroke="#4284f3" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 569.76 246 L 563.76 247.98 L 563.77 243.98 Z" fill="#4284f3" stroke="#4284f3" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(227.5,253.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="201" height="10" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 10px; font-family: Helvetica; color: rgb(153, 153, 153); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">WebSocket @ ChatServer's hostname &gt; <i>uuid</i><br /></div></div></foreignObject><text x="101" y="10" fill="#999999" text-anchor="middle" font-size="10px" font-family="Helvetica">WebSocket @ ChatServer's hostname &gt; &lt;i&gt;uuid&lt;/i&gt;&lt;br&gt;</text></switch></g><g transform="translate(186.5,26.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="43" height="14" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(153, 153, 153); line-height: 1.2; vertical-align: top; width: 45px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><font color="#666666" size="1"><b style="font-size: 14px">Server</b></font></div></div></foreignObject><text x="22" y="13" fill="#999999" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g></svg>